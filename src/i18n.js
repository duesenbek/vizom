'use strict';

(function () {
  const DEFAULT_LANG = 'en';
  const FLAG_MAP = {
    en: 'üá∫üá∏',
    kk: 'üá∞üáø',
    ru: 'üá∑üá∫',
    es: 'üá™üá∏',
    pt: 'üáµüáπ',
    tr: 'üáπüá∑',
    de: 'üá©üá™'
  };

  // Minimal translations object; others fall back to EN
  const translations = {
    en: {
      'nav.home': 'Home',
      'nav.generator': 'Generator',
      'nav.templates': 'Templates',
      'nav.docs': 'Docs',
      'nav.startShort': 'Start',
      'hero.title': 'Build beautiful charts, tables, and dashboards in seconds',
      'hero.subtitle': 'VIZOM turns your ideas into production-ready visuals instantly. Describe what you want and get pixel-perfect results.',
      'hero.primaryButton': 'Start Building Free',
      'hero.secondaryButton': 'Explore Features',
      'hero.tiles.responsive': 'Responsive charts',
      'hero.tiles.tables': 'Tables and CSV export',
      'hero.tiles.dashboards': 'Dashboards in minutes',
      'quickStart.placeholder': 'For example: Create a monthly sales bar chart...',
      'quickStart.button': 'Create',
      'quickStart.hint': 'Supports text, CSV, and lists. We automatically detect the data type.',
      'how.title': 'How it works',
      'how.subtitle': '4 simple steps to your finished visualization',
      'how.step1.title': 'Describe your data',
      'how.step1.desc': 'Paste text, CSV, or a short description.',
      'how.step2.title': 'Smart parsing',
      'how.step2.desc': 'We automatically structure messy data.',
      'how.step3.title': 'Visual generation',
      'how.step3.desc': 'AI builds your chart, table, or dashboard.',
      'how.step4.title': 'Export & share',
      'how.step4.desc': 'Download PNG/PDF or embed it in your site.',
      'generator.preview.title': 'Preview',
      'generator.preview.status': 'Live',
      'generator.preview.generate': 'Generate',
      'generator.preview.download': 'Download',
      'generator.preview.loading': 'Generating your visual‚Ä¶',
      'generator.preview.emptyTitle': 'Your visual will appear here',
      'generator.preview.emptySubtitle': 'Select a chart type and enter your data to get started',
      'generator.smartParse': 'Smart Parse',
      'generator.export.title': 'Export Format',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': 'Settings',
      'generator.settings.theme.label': 'Theme',
      'generator.settings.animation.label': 'Animation',
      'generator.chartSection.title': 'Select Chart Type',
      'generator.chartTypes.custom': 'Custom',
      'generator.chartTypes.bar': 'Bar Chart',
      'generator.chartDescriptions.bar': 'Compare values',
      'generator.chartTypes.line': 'Line Chart',
      'generator.chartDescriptions.line': 'Show trends',
      'generator.chartTypes.pie': 'Pie Chart',
      'generator.chartDescriptions.pie': 'Show parts',
      'generator.chartTypes.table': 'Table',
      'generator.chartDescriptions.table': 'Structured data',
      'generator.chartTypes.dashboard': 'Dashboard',
      'generator.chartDescriptions.dashboard': 'Multiple views',

      // Templates page
      'templates.header.title': 'Template Gallery',
      'templates.header.subtitle': 'Start with a professional template and customize it to your needs',
      'templates.favorites.title': 'Favorite Templates',
      'templates.favorites.manage': 'Manage',
      'templates.sidebar.view': 'View',
      'templates.sidebar.categories': 'Categories',
      'templates.sidebar.all': 'All templates',
      'templates.sidebar.business': 'Business',
      'templates.sidebar.academic': 'Academic',
      'templates.sidebar.marketing': 'Marketing',
      'templates.sidebar.sort': 'Sort',
      'templates.cards.use': 'Use',
      'templates.cards.preview': 'Preview',
      'templates.cards.details': 'Details'
    },

    // Russian
    ru: {
      'nav.home': '–ì–ª–∞–≤–Ω–∞—è',
      'nav.generator': '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä',
      'nav.templates': '–®–∞–±–ª–æ–Ω—ã',
      'nav.docs': '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è',
      'nav.startShort': '–°—Ç–∞—Ä—Ç',
      'hero.title': '–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã –∑–∞ —Å–µ–∫—É–Ω–¥—ã',
      'hero.subtitle': 'VIZOM –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤–∞—à–∏ –∏–¥–µ–∏ –≤ –≥–æ—Ç–æ–≤—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ, –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.',
      'hero.primaryButton': '–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ',
      'hero.secondaryButton': '–ò–∑—É—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏',
      'hero.tiles.responsive': '–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏',
      'hero.tiles.tables': '–¢–∞–±–ª–∏—Ü—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç CSV',
      'hero.tiles.dashboards': '–î–∞—à–±–æ—Ä–¥—ã –∑–∞ –º–∏–Ω—É—Ç—ã',
      'quickStart.placeholder': '–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ—Å—Ç—Ä–æ–π —Å—Ç–æ–ª–±—á–∞—Ç—É—é –¥–∏–∞–≥—Ä–∞–º–º—É –º–µ—Å—è—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂...',
      'quickStart.button': '–°–æ–∑–¥–∞—Ç—å',
      'quickStart.hint': '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–µ–∫—Å—Ç, CSV –∏ —Å–ø–∏—Å–∫–∏. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.',
      'how.title': '–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç',
      'how.subtitle': '4 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞ –∫ –≤–∞—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏',
      'how.step1.title': '–û–ø–∏—à–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ',
      'how.step1.desc': '–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç, CSV –∏–ª–∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.',
      'how.step2.title': '–£–º–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥',
      'how.step2.desc': '–ú—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ.',
      'how.step3.title': '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∞',
      'how.step3.desc': '–ò–ò —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫, —Ç–∞–±–ª–∏—Ü—É –∏–ª–∏ –¥–∞—à–±–æ—Ä–¥.',
      'how.step4.title': '–≠–∫—Å–ø–æ—Ä—Ç –∏ –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø',
      'how.step4.desc': '–°–∫–∞—á–∞–π—Ç–µ PNG/PDF –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ —Å–∞–π—Ç.',
      'generator.preview.title': '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä',
      'generator.preview.status': '–í —Å–µ—Ç–∏',
      'generator.preview.generate': '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å',
      'generator.preview.download': '–°–∫–∞—á–∞—Ç—å',
      'generator.preview.loading': '–°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª‚Ä¶',
      'generator.preview.emptyTitle': '–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è',
      'generator.preview.emptySubtitle': '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ',
      'generator.smartParse': '–£–º–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥',
      'generator.export.title': '–§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
      'generator.settings.theme.label': '–¢–µ–º–∞',
      'generator.settings.animation.label': '–ê–Ω–∏–º–∞—Ü–∏—è',
      'generator.chartSection.title': '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞',
      'generator.chartTypes.custom': '–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π',
      'generator.chartTypes.bar': '–°—Ç–æ–ª–±—á–∞—Ç–∞—è',
      'generator.chartDescriptions.bar': '–°—Ä–∞–≤–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è',
      'generator.chartTypes.line': '–õ–∏–Ω–µ–π–Ω–∞—è',
      'generator.chartDescriptions.line': '–ü–æ–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã',
      'generator.chartTypes.pie': '–ö—Ä—É–≥–æ–≤–∞—è',
      'generator.chartDescriptions.pie': '–ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–ª–∏',
      'generator.chartTypes.table': '–¢–∞–±–ª–∏—Ü–∞',
      'generator.chartDescriptions.table': '–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
      'generator.chartTypes.dashboard': '–î–∞—à–±–æ—Ä–¥',
      'generator.chartDescriptions.dashboard': '–ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–æ–≤',
      'templates.header.title': '–ì–∞–ª–µ—Ä–µ—è —à–∞–±–ª–æ–Ω–æ–≤',
      'templates.header.subtitle': '–ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ —Å–µ–±—è',
      'templates.favorites.title': '–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã',
      'templates.favorites.manage': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ',
      'templates.sidebar.view': '–í–∏–¥',
      'templates.sidebar.categories': '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏',
      'templates.sidebar.all': '–í—Å–µ —à–∞–±–ª–æ–Ω—ã',
      'templates.sidebar.business': '–ë–∏–∑–Ω–µ—Å',
      'templates.sidebar.academic': '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ',
      'templates.sidebar.marketing': '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥',
      'templates.sidebar.sort': '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞',
      'templates.cards.use': '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å',
      'templates.cards.preview': '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä',
      'templates.cards.details': '–î–µ—Ç–∞–ª–∏'
    },

    // Kazakh
    kk: {
      'nav.home': '–ë–∞—Å—Ç—ã –±–µ—Ç',
      'nav.generator': '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä',
      'nav.templates': '“Æ–ª–≥—ñ–ª–µ—Ä',
      'nav.docs': '“ö“±–∂–∞—Ç—Ç–∞–º–∞',
      'nav.startShort': '–ë–∞—Å—Ç–∞—É',
      'hero.title': '–ö”©—Ä–∫–µ–º –¥–∏–∞–≥—Ä–∞–º–º–∞–ª–∞—Ä, –∫–µ—Å—Ç–µ–ª–µ—Ä –∂”ô–Ω–µ –¥—ç—à–±–æ—Ä–¥—Ç–∞—Ä–¥—ã —Å–µ–∫—É–Ω–¥—Ç–∞—Ä–¥–∞ –∂–∞—Å–∞“£—ã–∑',
      'hero.subtitle': 'VIZOM –∏–¥–µ—è“£—ã–∑–¥—ã –¥–∞–π—ã–Ω –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è“ì–∞ —Ç–µ–∑ –∞–π–Ω–∞–ª–¥—ã—Ä–∞–¥—ã. –ù–µ –∫–µ—Ä–µ–≥—ñ–Ω —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑ ‚Äì –Ω”ô—Ç–∏–∂–µ–Ω—ñ –±—ñ—Ä–¥–µ–Ω –∞–ª—ã“£—ã–∑.',
      'hero.primaryButton': '–¢–µ–≥—ñ–Ω –±–∞—Å—Ç–∞—É',
      'hero.secondaryButton': '–ú“Ø–º–∫—ñ–Ω–¥—ñ–∫—Ç–µ—Ä',
      'hero.tiles.responsive': '–ë–µ–π—ñ–º–¥–µ–ª–≥—ñ—à –¥–∏–∞–≥—Ä–∞–º–º–∞–ª–∞—Ä',
      'hero.tiles.tables': '–ö–µ—Å—Ç–µ–ª–µ—Ä –∂”ô–Ω–µ CSV —ç–∫—Å–ø–æ—Ä—Ç',
      'hero.tiles.dashboards': '–î—ç—à–±–æ—Ä–¥—Ç–∞—Ä –º–∏–Ω—É—Ç—Ç–∞—Ä–¥–∞',
      'quickStart.placeholder': '–ú—ã—Å–∞–ª—ã: –ê–π–ª—ã“õ —Å–∞—Ç—ã–ª—ã–º–¥–∞—Ä“ì–∞ –±–∞“ì–∞–Ω–¥—ã –¥–∏–∞–≥—Ä–∞–º–º–∞ “õ“±—Ä...',
      'quickStart.button': '–ñ–∞—Å–∞—É',
      'quickStart.hint': '–ú”ô—Ç—ñ–Ω, CSV –∂”ô–Ω–µ —Ç—ñ–∑—ñ–º–¥–µ—Ä “õ–æ–ª–¥–∞—É —Ç–∞–±–∞–¥—ã. –î–µ—Ä–µ–∫ —Ç“Ø—Ä—ñ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã –∞–Ω—ã“õ—Ç–∞–ª–∞–¥—ã.',
      'how.title': '“ö–∞–ª–∞–π –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ',
      'how.subtitle': '4 “õ–∞—Ä–∞–ø–∞–π—ã–º “õ–∞–¥–∞–º',
      'how.step1.title': '–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ —Å–∏–ø–∞—Ç—Ç–∞“£—ã–∑',
      'how.step1.desc': '–ú”ô—Ç—ñ–Ω, CSV –Ω–µ “õ—ã—Å“õ–∞ —Å–∏–ø–∞—Ç—Ç–∞–º–∞.',
      'how.step2.title': '–ê“õ—ã–ª–¥—ã —Ç–∞–ª–¥–∞—É',
      'how.step2.desc': '–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ ”©–∑—ñ–º—ñ–∑ “õ“±—Ä—ã–ª—ã–º–¥–∞–π–º—ã–∑.',
      'how.step3.title': '–í–∏–∑—É–∞–ª –∂–∞—Å–∞—É',
      'how.step3.desc': '–ò–ò –≥—Ä–∞—Ñ–∏–∫, –∫–µ—Å—Ç–µ –Ω–µ –¥—ç—à–±–æ—Ä–¥ “õ“±—Ä–∞–¥—ã.',
      'how.step4.title': '–≠–∫—Å–ø–æ—Ä—Ç –∂”ô–Ω–µ –±”©–ª—ñ—Å—É',
      'how.step4.desc': 'PNG/PDF –∂“Ø–∫—Ç–µ–ø –∞–ª—ã“£—ã–∑ –Ω–µ–º–µ—Å–µ –µ–Ω–¥—ñ—Ä—ñ“£—ñ–∑.',
      'generator.preview.title': '–ê–ª–¥—ã–Ω –∞–ª–∞ “õ–∞—Ä–∞—É',
      'generator.preview.status': '–û–Ω–ª–∞–π–Ω',
      'generator.preview.generate': '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É',
      'generator.preview.download': '–ñ“Ø–∫—Ç–µ—É',
      'generator.preview.loading': '–í–∏–∑—É–∞–ª –∂–∞—Å–∞–ª—É–¥–∞‚Ä¶',
      'generator.preview.emptyTitle': '–í–∏–∑—É–∞–ª –æ—Å—ã–Ω–¥–∞ –ø–∞–π–¥–∞ –±–æ–ª–∞–¥—ã',
      'generator.preview.emptySubtitle': '–ì—Ä–∞—Ñ–∏–∫ —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞–ø, –¥–µ—Ä–µ–∫ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑',
      'generator.smartParse': '–ê“õ—ã–ª–¥—ã —Ç–∞–ª–¥–∞—É',
      'generator.export.title': '–≠–∫—Å–ø–æ—Ä—Ç –ø—ñ—à—ñ–º—ñ',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': '–ë–∞–ø—Ç–∞—É–ª–∞—Ä',
      'generator.settings.theme.label': '–¢–µ–º–∞',
      'generator.settings.animation.label': '–ê–Ω–∏–º–∞—Ü–∏—è',
      'generator.chartSection.title': '–ì—Ä–∞—Ñ–∏–∫ —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑',
      'generator.chartTypes.custom': '–ï—Ä–∫—ñ–Ω',
      'generator.chartTypes.bar': '–ë–∞“ì–∞–Ω–¥—ã',
      'generator.chartDescriptions.bar': '–ú”ô–Ω–¥–µ—Ä–¥—ñ —Å–∞–ª—ã—Å—Ç—ã—Ä—É',
      'generator.chartTypes.line': '–°—ã–∑—ã“õ—Ç—ã“õ',
      'generator.chartDescriptions.line': '–¢—Ä–µ–Ω–¥—Ç–µ—Ä',
      'generator.chartTypes.pie': '–î”©“£–≥–µ–ª–µ–∫',
      'generator.chartDescriptions.pie': '“Æ–ª–µ—Å—Ç–µ—Ä',
      'generator.chartTypes.table': '–ö–µ—Å—Ç–µ',
      'generator.chartDescriptions.table': '“ö“±—Ä—ã–ª—ã–º–¥—ã –¥–µ—Ä–µ–∫',
      'generator.chartTypes.dashboard': '–î—ç—à–±–æ—Ä–¥',
      'generator.chartDescriptions.dashboard': '–ö”©–ø –∫”©—Ä—ñ–Ω—ñ—Å',
      'templates.header.title': '“Æ–ª–≥—ñ–ª–µ—Ä –≥–∞–ª–µ—Ä–µ—è—Å—ã',
      'templates.header.subtitle': '–ö”ô—Å—ñ–±–∏ “Ø–ª–≥—ñ–¥–µ–Ω –±–∞—Å—Ç–∞–ø, ”©–∑—ñ“£—ñ–∑–≥–µ —Å–∞–π —Ä–µ—Ç—Ç–µ“£—ñ–∑',
      'templates.favorites.title': '–¢–∞“£–¥–∞—É–ª—ã “Ø–ª–≥—ñ–ª–µ—Ä',
      'templates.favorites.manage': '–ë–∞—Å“õ–∞—Ä—É',
      'templates.sidebar.view': '–ö”©—Ä—ñ–Ω—ñ—Å',
      'templates.sidebar.categories': '–°–∞–Ω–∞—Ç—Ç–∞—Ä',
      'templates.sidebar.all': '–ë–∞—Ä–ª—ã“õ “Ø–ª–≥—ñ–ª–µ—Ä',
      'templates.sidebar.business': '–ë–∏–∑–Ω–µ—Å',
      'templates.sidebar.academic': '–ê–∫–∞–¥–µ–º–∏—è–ª—ã“õ',
      'templates.sidebar.marketing': '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥',
      'templates.sidebar.sort': '–°“±—Ä—ã–ø—Ç–∞—É',
      'templates.cards.use': '“ö–æ–ª–¥–∞–Ω—É',
      'templates.cards.preview': '–ê–ª–¥—ã–Ω “õ–∞—Ä–∞—É',
      'templates.cards.details': '–ï–≥–∂–µ–π-—Ç–µ–≥–∂–µ–π'
    },

    // Spanish
    es: {
      'nav.home': 'Inicio',
      'nav.generator': 'Generador',
      'nav.templates': 'Plantillas',
      'nav.docs': 'Docs',
      'nav.startShort': 'Empezar',
      'hero.title': 'Crea gr√°ficos, tablas y paneles en segundos',
      'hero.subtitle': 'VIZOM convierte tus ideas en visuales listos para producci√≥n al instante.',
      'hero.primaryButton': 'Comenzar gratis',
      'hero.secondaryButton': 'Explorar funciones',
      'hero.tiles.responsive': 'Gr√°ficos responsivos',
      'hero.tiles.tables': 'Tablas y exportaci√≥n CSV',
      'hero.tiles.dashboards': 'Paneles en minutos',
      'quickStart.placeholder': 'Por ejemplo: Crea un gr√°fico de barras mensual...',
      'quickStart.button': 'Crear',
      'quickStart.hint': 'Admite texto, CSV y listas. Detectamos el tipo de datos autom√°ticamente.',
      'how.title': 'C√≥mo funciona',
      'how.subtitle': '4 pasos simples',
      'how.step1.title': 'Describe tus datos',
      'how.step1.desc': 'Pega texto, CSV o una breve descripci√≥n.',
      'how.step2.title': 'An√°lisis inteligente',
      'how.step2.desc': 'Estructuramos los datos autom√°ticamente.',
      'how.step3.title': 'Generaci√≥n visual',
      'how.step3.desc': 'La IA construye tu gr√°fico, tabla o panel.',
      'how.step4.title': 'Exportar y compartir',
      'how.step4.desc': 'Descarga PNG/PDF o incr√∫stalo.',
      'generator.preview.title': 'Vista previa',
      'generator.preview.status': 'En vivo',
      'generator.preview.generate': 'Generar',
      'generator.preview.download': 'Descargar',
      'generator.preview.loading': 'Generando‚Ä¶',
      'generator.preview.emptyTitle': 'Tu visual aparecer√° aqu√≠',
      'generator.preview.emptySubtitle': 'Selecciona un tipo de gr√°fico e ingresa tus datos',
      'generator.smartParse': 'An√°lisis inteligente',
      'generator.export.title': 'Formato de exportaci√≥n',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': 'Ajustes',
      'generator.settings.theme.label': 'Tema',
      'generator.settings.animation.label': 'Animaci√≥n',
      'generator.chartSection.title': 'Selecciona tipo de gr√°fico',
      'generator.chartTypes.custom': 'Personalizado',
      'generator.chartTypes.bar': 'Barras',
      'generator.chartDescriptions.bar': 'Comparar valores',
      'generator.chartTypes.line': 'L√≠neas',
      'generator.chartDescriptions.line': 'Mostrar tendencias',
      'generator.chartTypes.pie': 'Circular',
      'generator.chartDescriptions.pie': 'Partes',
      'generator.chartTypes.table': 'Tabla',
      'generator.chartDescriptions.table': 'Datos estructurados',
      'generator.chartTypes.dashboard': 'Panel',
      'generator.chartDescriptions.dashboard': 'M√∫ltiples vistas',
      'templates.header.title': 'Galer√≠a de plantillas',
      'templates.header.subtitle': 'Empieza con una plantilla profesional y personal√≠zala',
      'templates.favorites.title': 'Plantillas favoritas',
      'templates.favorites.manage': 'Gestionar',
      'templates.sidebar.view': 'Vista',
      'templates.sidebar.categories': 'Categor√≠as',
      'templates.sidebar.all': 'Todas las plantillas',
      'templates.sidebar.business': 'Negocios',
      'templates.sidebar.academic': 'Acad√©mico',
      'templates.sidebar.marketing': 'Marketing',
      'templates.sidebar.sort': 'Ordenar',
      'templates.cards.use': 'Usar',
      'templates.cards.preview': 'Vista previa',
      'templates.cards.details': 'Detalles'
    },

    // Portuguese
    pt: {
      'nav.home': 'In√≠cio',
      'nav.generator': 'Gerador',
      'nav.templates': 'Modelos',
      'nav.docs': 'Docs',
      'nav.startShort': 'Come√ßar',
      'hero.title': 'Crie gr√°ficos, tabelas e dashboards em segundos',
      'hero.subtitle': 'VIZOM transforma ideias em visuais prontos instantaneamente.',
      'hero.primaryButton': 'Come√ßar gr√°tis',
      'hero.secondaryButton': 'Explorar recursos',
      'hero.tiles.responsive': 'Gr√°ficos responsivos',
      'hero.tiles.tables': 'Tabelas e exporta√ß√£o CSV',
      'hero.tiles.dashboards': 'Dashboards em minutos',
      'quickStart.placeholder': 'Ex.: Crie um gr√°fico de barras mensal...',
      'quickStart.button': 'Criar',
      'quickStart.hint': 'Suporta texto, CSV e listas. Detectamos automaticamente.',
      'how.title': 'Como funciona',
      'how.subtitle': '4 passos simples',
      'how.step1.title': 'Descreva seus dados',
      'how.step1.desc': 'Cole texto, CSV ou uma breve descri√ß√£o.',
      'how.step2.title': 'An√°lise inteligente',
      'how.step2.desc': 'Estruturamos os dados automaticamente.',
      'how.step3.title': 'Gera√ß√£o visual',
      'how.step3.desc': 'A IA cria seu gr√°fico, tabela ou dashboard.',
      'how.step4.title': 'Exportar e compartilhar',
      'how.step4.desc': 'Baixe PNG/PDF ou incorpore.',
      'generator.preview.title': 'Pr√©-visualiza√ß√£o',
      'generator.preview.status': 'Ao vivo',
      'generator.preview.generate': 'Gerar',
      'generator.preview.download': 'Baixar',
      'generator.preview.loading': 'Gerando‚Ä¶',
      'generator.preview.emptyTitle': 'Seu visual aparecer√° aqui',
      'generator.preview.emptySubtitle': 'Selecione um tipo e insira seus dados',
      'generator.smartParse': 'An√°lise inteligente',
      'generator.export.title': 'Formato de exporta√ß√£o',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': 'Configura√ß√µes',
      'generator.settings.theme.label': 'Tema',
      'generator.settings.animation.label': 'Anima√ß√£o',
      'generator.chartSection.title': 'Selecione o tipo de gr√°fico',
      'generator.chartTypes.custom': 'Personalizado',
      'generator.chartTypes.bar': 'Barras',
      'generator.chartDescriptions.bar': 'Comparar valores',
      'generator.chartTypes.line': 'Linhas',
      'generator.chartDescriptions.line': 'Tend√™ncias',
      'generator.chartTypes.pie': 'Pizza',
      'generator.chartDescriptions.pie': 'Partes',
      'generator.chartTypes.table': 'Tabela',
      'generator.chartDescriptions.table': 'Dados estruturados',
      'generator.chartTypes.dashboard': 'Dashboard',
      'generator.chartDescriptions.dashboard': 'M√∫ltiplas vistas',
      'templates.header.title': 'Galeria de modelos',
      'templates.header.subtitle': 'Comece com um modelo profissional e personalize',
      'templates.favorites.title': 'Modelos favoritos',
      'templates.favorites.manage': 'Gerenciar',
      'templates.sidebar.view': 'Visualiza√ß√£o',
      'templates.sidebar.categories': 'Categorias',
      'templates.sidebar.all': 'Todos os modelos',
      'templates.sidebar.business': 'Neg√≥cios',
      'templates.sidebar.academic': 'Acad√™mico',
      'templates.sidebar.marketing': 'Marketing',
      'templates.sidebar.sort': 'Ordenar',
      'templates.cards.use': 'Usar',
      'templates.cards.preview': 'Pr√©-visualizar',
      'templates.cards.details': 'Detalhes'
    },

    // Turkish
    tr: {
      'nav.home': 'Ana sayfa',
      'nav.generator': 'Olu≈üturucu',
      'nav.templates': '≈ûablonlar',
      'nav.docs': 'Dok√ºmanlar',
      'nav.startShort': 'Ba≈ülat',
      'hero.title': 'Saniyeler i√ßinde grafikler, tablolar ve panolar olu≈üturun',
      'hero.subtitle': 'VIZOM fikirlerinizi anƒ±nda √ºretim hazƒ±r g√∂rsellere d√∂n√º≈üt√ºr√ºr.',
      'hero.primaryButton': '√úcretsiz ba≈üla',
      'hero.secondaryButton': '√ñzellikleri ke≈üfet',
      'hero.tiles.responsive': 'Duyarlƒ± grafikler',
      'hero.tiles.tables': 'Tablolar ve CSV dƒ±≈üa aktarma',
      'hero.tiles.dashboards': 'Dakikalar i√ßinde panolar',
      'quickStart.placeholder': '√ñrn: Aylƒ±k satƒ±≈ü √ßubuk grafiƒüi olu≈ütur‚Ä¶',
      'quickStart.button': 'Olu≈ütur',
      'quickStart.hint': 'Metin, CSV ve listeler desteklenir. Veri t√ºr√ºn√º otomatik algƒ±larƒ±z.',
      'how.title': 'Nasƒ±l √ßalƒ±≈üƒ±r',
      'how.subtitle': '4 basit adƒ±m',
      'how.step1.title': 'Verini a√ßƒ±kla',
      'how.step1.desc': 'Metin, CSV veya kƒ±sa a√ßƒ±klama.',
      'how.step2.title': 'Akƒ±llƒ± ayrƒ±≈ütƒ±rma',
      'how.step2.desc': 'Veriyi otomatik yapƒ±landƒ±rƒ±rƒ±z.',
      'how.step3.title': 'G√∂rsel √ºretimi',
      'how.step3.desc': 'YZ grafik, tablo veya pano olu≈üturur.',
      'how.step4.title': 'Dƒ±≈üa aktar ve payla≈ü',
      'how.step4.desc': 'PNG/PDF indir veya yerle≈ütir.',
      'generator.preview.title': '√ñnizleme',
      'generator.preview.status': 'Canlƒ±',
      'generator.preview.generate': 'Olu≈ütur',
      'generator.preview.download': 'ƒ∞ndir',
      'generator.preview.loading': 'Olu≈üturuluyor‚Ä¶',
      'generator.preview.emptyTitle': 'G√∂rsel burada g√∂r√ºnecek',
      'generator.preview.emptySubtitle': 'Grafik t√ºr√ºn√º se√ß ve verini gir',
      'generator.smartParse': 'Akƒ±llƒ± ayrƒ±≈ütƒ±rma',
      'generator.export.title': 'Dƒ±≈üa aktarma bi√ßimi',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': 'Ayarlar',
      'generator.settings.theme.label': 'Tema',
      'generator.settings.animation.label': 'Animasyon',
      'generator.chartSection.title': 'Grafik t√ºr√ºn√º se√ß',
      'generator.chartTypes.custom': '√ñzel',
      'generator.chartTypes.bar': '√áubuk',
      'generator.chartDescriptions.bar': 'Deƒüerleri kar≈üƒ±la≈ütƒ±r',
      'generator.chartTypes.line': '√áizgi',
      'generator.chartDescriptions.line': 'Eƒüilimleri g√∂ster',
      'generator.chartTypes.pie': 'Pasta',
      'generator.chartDescriptions.pie': 'Par√ßalar',
      'generator.chartTypes.table': 'Tablo',
      'generator.chartDescriptions.table': 'Yapƒ±landƒ±rƒ±lmƒ±≈ü veri',
      'generator.chartTypes.dashboard': 'Pano',
      'generator.chartDescriptions.dashboard': 'Birden √ßok g√∂r√ºn√ºm',
      'templates.header.title': '≈ûablon Galerisi',
      'templates.header.subtitle': 'Profesyonel bir ≈üablonla ba≈ülayƒ±n ve √∂zelle≈ütirin',
      'templates.favorites.title': 'Favori ≈üablonlar',
      'templates.favorites.manage': 'Y√∂net',
      'templates.sidebar.view': 'G√∂r√ºn√ºm',
      'templates.sidebar.categories': 'Kategoriler',
      'templates.sidebar.all': 'T√ºm ≈üablonlar',
      'templates.sidebar.business': 'ƒ∞≈ü',
      'templates.sidebar.academic': 'Akademik',
      'templates.sidebar.marketing': 'Pazarlama',
      'templates.sidebar.sort': 'Sƒ±rala',
      'templates.cards.use': 'Kullan',
      'templates.cards.preview': '√ñnizleme',
      'templates.cards.details': 'Detaylar'
    },

    // German
    de: {
      'nav.home': 'Start',
      'nav.generator': 'Generator',
      'nav.templates': 'Vorlagen',
      'nav.docs': 'Doku',
      'nav.startShort': 'Start',
      'hero.title': 'Erstelle Diagramme, Tabellen und Dashboards in Sekunden',
      'hero.subtitle': 'VIZOM macht aus Ideen sofort produktionsreife Visuals.',
      'hero.primaryButton': 'Kostenlos starten',
      'hero.secondaryButton': 'Funktionen ansehen',
      'hero.tiles.responsive': 'Responsiv Diagramme',
      'hero.tiles.tables': 'Tabellen und CSV-Export',
      'hero.tiles.dashboards': 'Dashboards in Minuten',
      'quickStart.placeholder': 'Z. B.: Erstelle ein Monats-Balkendiagramm‚Ä¶',
      'quickStart.button': 'Erstellen',
      'quickStart.hint': 'Unterst√ºtzt Text, CSV und Listen. Automatische Erkennung.',
      'how.title': 'So funktioniert es',
      'how.subtitle': '4 einfache Schritte',
      'how.step1.title': 'Beschreibe deine Daten',
      'how.step1.desc': 'F√ºge Text, CSV oder eine Kurzbeschreibung ein.',
      'how.step2.title': 'Intelligentes Parsing',
      'how.step2.desc': 'Wir strukturieren die Daten automatisch.',
      'how.step3.title': 'Visualisierung',
      'how.step3.desc': 'KI erstellt Diagramm, Tabelle oder Dashboard.',
      'how.step4.title': 'Export & Teilen',
      'how.step4.desc': 'PNG/PDF herunterladen oder einbetten.',
      'generator.preview.title': 'Vorschau',
      'generator.preview.status': 'Live',
      'generator.preview.generate': 'Generieren',
      'generator.preview.download': 'Download',
      'generator.preview.loading': 'Wird erzeugt‚Ä¶',
      'generator.preview.emptyTitle': 'Dein Visual erscheint hier',
      'generator.preview.emptySubtitle': 'Diagrammtyp w√§hlen und Daten eingeben',
      'generator.smartParse': 'Smart Parse',
      'generator.export.title': 'Exportformat',
      'generator.export.png': 'PNG',
      'generator.export.pdf': 'PDF',
      'generator.export.csv': 'CSV',
      'generator.export.svg': 'SVG',
      'generator.settings.title': 'Einstellungen',
      'generator.settings.theme.label': 'Thema',
      'generator.settings.animation.label': 'Animation',
      'generator.chartSection.title': 'Diagrammtyp w√§hlen',
      'generator.chartTypes.custom': 'Benutzerdefiniert',
      'generator.chartTypes.bar': 'Balken',
      'generator.chartDescriptions.bar': 'Werte vergleichen',
      'generator.chartTypes.line': 'Linie',
      'generator.chartDescriptions.line': 'Trends zeigen',
      'generator.chartTypes.pie': 'Kreis',
      'generator.chartDescriptions.pie': 'Anteile',
      'generator.chartTypes.table': 'Tabelle',
      'generator.chartDescriptions.table': 'Strukturierte Daten',
      'generator.chartTypes.dashboard': 'Dashboard',
      'generator.chartDescriptions.dashboard': 'Mehrere Ansichten',
      'templates.header.title': 'Vorlagen-Galerie',
      'templates.header.subtitle': 'Starte mit einer Profi-Vorlage und passe sie an',
      'templates.favorites.title': 'Favoriten',
      'templates.favorites.manage': 'Verwalten',
      'templates.sidebar.view': 'Ansicht',
      'templates.sidebar.categories': 'Kategorien',
      'templates.sidebar.all': 'Alle Vorlagen',
      'templates.sidebar.business': 'Business',
      'templates.sidebar.academic': 'Akademisch',
      'templates.sidebar.marketing': 'Marketing',
      'templates.sidebar.sort': 'Sortieren',
      'templates.cards.use': 'Verwenden',
      'templates.cards.preview': 'Vorschau',
      'templates.cards.details': 'Details'
    }
  };

  function getLang() {
    // Force English by default; use saved lang if present
    const saved = localStorage.getItem('vizom_lang');
    return saved || DEFAULT_LANG;
  }

  function setLang(lang) {
    localStorage.setItem('vizom_lang', lang);
    applyTranslations(lang);
    updateFlag(lang);
    // Set document language
    try { document.documentElement.setAttribute('lang', lang); } catch (e) {}
    // Mark selected flag
    document.querySelectorAll('.language-option').forEach(btn => {
      if (btn.getAttribute('data-lang') === lang) {
        btn.classList.add('is-active');
      } else {
        btn.classList.remove('is-active');
      }
    });
  }

  function updateFlag(lang) {
    const el = document.getElementById('language-flag');
    if (el) el.textContent = FLAG_MAP[lang] || FLAG_MAP[DEFAULT_LANG];
  }

  function t(key, lang) {
    const l = lang || getLang();
    const en = translations.en || {};
    const dict = (translations[l] || {});
    return (key in dict) ? dict[key] : (en[key] || '');
  }

  function applyTranslations(lang) {
    const current = lang || getLang();
    document.querySelectorAll('[data-i18n]').forEach((node) => {
      const key = node.getAttribute('data-i18n');
      const val = t(key, current);
      if (!val) return;
      if (node.childElementCount === 0) {
        node.textContent = val;
      } else {
        const textTarget = node.querySelector('[data-i18n-text]');
        if (textTarget) {
          textTarget.textContent = val;
        }
      }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach((node) => {
      const key = node.getAttribute('data-i18n-placeholder');
      const val = t(key, current);
      if (val) node.setAttribute('placeholder', val);
    });

    document.querySelectorAll('[data-i18n-option]').forEach((node) => {
      const key = node.getAttribute('data-i18n-option');
      const val = t(key, current);
      if (val) node.textContent = val;
    });
  }

  function initLanguageMenu() {
    const toggle = document.getElementById('language-toggle');
    const menu = document.getElementById('language-menu');
    if (!toggle || !menu) return;

    toggle.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });

    document.querySelectorAll('.language-option').forEach((btn) => {
      btn.addEventListener('click', () => {
        const lang = btn.getAttribute('data-lang');
        // Allow choosing any, but fallback will show EN content
        setLang(lang);
        menu.classList.add('hidden');
      });
    });

    document.addEventListener('click', (e) => {
      if (!menu.contains(e.target) && !toggle.contains(e.target)) {
        menu.classList.add('hidden');
      }
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const lang = getLang();
    applyTranslations(lang);
    updateFlag(lang);
    try { document.documentElement.setAttribute('lang', lang); } catch (e) {}
    initLanguageMenu();
  });

  // Expose minimal API for dynamic re-apply
  window.VIZOM_I18N = {
    apply: () => applyTranslations(getLang()),
    set: (l) => setLang(l),
    setLanguage: (l) => setLang(l), // Alias for compatibility
    get: () => getLang(),
    t: (key) => t(key, getLang())
  };
})();
